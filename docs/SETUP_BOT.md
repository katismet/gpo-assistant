# Настройка Telegram бота

## Проблема
Бот не работает из-за отсутствия валидного токена.

## Решение

### 1. Получите токен от @BotFather

1. Откройте Telegram
2. Найдите @BotFather
3. Отправьте команду `/newbot`
4. Следуйте инструкциям:
   - Введите имя бота (например: "ГПО Помощник")
   - Введите username бота (например: "gpo_helper_bot")
5. Скопируйте полученный токен (формат: `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)

### 2. Установите токен

**Вариант A: Через переменную окружения (рекомендуется)**
```bash
# Windows PowerShell
$env:BOT_TOKEN="ваш_токен_здесь"

# Windows CMD
set BOT_TOKEN=ваш_токен_здесь

# Linux/Mac
export BOT_TOKEN="ваш_токен_здесь"
```

**Вариант B: В файле .env**
```bash
# Отредактируйте .env файл
BOT_TOKEN=ваш_токен_здесь
```

### 3. Запустите бота

```bash
# Активируйте виртуальное окружение
.\venv_clean\Scripts\Activate.ps1

# Запустите бота
python -u -m app.telegram.bot
```

### 4. Проверьте работу

1. Найдите вашего бота в Telegram по username
2. Отправьте `/start`
3. Проверьте кнопки:
   - "ПЛАН на день" - должен запустить FSM поток
   - "ОТЧЁТ за смену" - должен запустить FSM поток
   - Остальные кнопки - должны показывать заглушки

## Структура проекта

- `app/telegram/bot.py` - основной файл бота
- `app/telegram/router_root.py` - главное меню
- `app/telegram/flow_plan.py` - поток "План"
- `app/telegram/flow_report.py` - поток "Отчёт"
- `app/models.py` - модели БД
- `app/services/plan_repo.py` - сохранение планов

## База данных

База данных SQLite создается автоматически в файле `gpo_assistant.db`.

Для инициализации тестовых данных:
```bash
python init_db.py
```

## Отладка

Если бот не отвечает:
1. Проверьте токен: `python test_bot.py`
2. Проверьте логи в консоли
3. Убедитесь, что виртуальное окружение активировано
4. Проверьте подключение к интернету
